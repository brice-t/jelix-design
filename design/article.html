<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr_FR" lang="fr_FR">
<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type"/>
    <title>Jelix, PHP framework</title>
    <link type="text/css" href="design.css" media="all" title="Jelix" rel="stylesheet" />
    <link type="text/css" href="wiki_screen.css" media="all" title="Jelix" rel="stylesheet" />
</head><body >
<div id="top-box">
    <div class="top-container">
        <div id="accessibility">
            Quick links:
            <a href="#article">Content</a> -
            <a href="#topmenubar">sections</a> -
            <a href="#submenubar">sub sections</a>
        </div>

        <div id="lang-box">
            <strong>EN</strong>
            <a href="article_fr.html" hreflang="fr" title="version française">FR</a>
        </div>
    </div>
</div>

<div id="header">
    <div class="top-container">

        <h1 id="logo">
             <a href="index.html" title="Homepage"><img src="logo_jelix_moyen4.png" alt="Jelix" /></a>
        </h1>

        <ul id="topmenubar">
            <li class="selected"><a href="index.html">About</a></li>
            <li><a href="index.html">Download</a></li>
            <li><a href="index.html">Documentation</a></li>
            <li><a href="index.html">Community</a></li>
            <li><a href="index.html">Support</a></li>
        </ul>

    </div>
</div>
<div id="main-content">
    <div class="top-container">

        <div id="content-header">
            <ul id="submenubar">
                <li><a href="index.html">Tutorials</a></li>
                <li class="selected"><a href="index.html">Manual 1.3</a></li>
                <li><a href="index.html">Manual 1.2</a></li>
            
                <li><a href="index.html">1.1</a></li>
                <li><a href="index.html">1.0</a></li>
                <li><a href="index.html">API reference</a></li>
                <li>
                    
                     <form action="" accept-charset="utf-8" class="search" id="dw__search" method="get">
                <input type="hidden" name="do" value="search" />
                <input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" />
                <input type="submit" class="button" value="" id="search-btn" title="Search" />
            </form>
                    
                </li>
            </ul>
        </div>



        <!--<div class="content-box">
            <h2>Lorem</h2>
        </div>-->




<!-- ============================ content ===== -->


        <div id="article">
            <div id="article-header">
                <p><span class="bchead">Trace:</span> <span class="bcsep">&bull;</span>
                <a href=""  class="breadcrumbs" title="en:manual-1.3">manual-1.3</a>
                <span class="bcsep">&bull;</span>
                <span class="curid"><a href=""  class="breadcrumbs" title="en:manual-1.3:controleurs">controllers</a></span></p>
                <p style="text-align:right;">Wiki: <a href=""  class="action index" accesskey="x" rel="nofollow" title="Index">Index</a> -
                <a href=""  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements">Last changes</a> -
                <a href="" >Back link</a>
                </p>
                
            </div>
    
            <div id="book-page-header">
                <div class="book-title"><a href="">Developer manual</a> <img src="icons/ui-menu-blue.png" alt="" />
                    <div  class="book-hierarchy">
                    <ul>
                        <li>^ <a href="#" >Main concepts</a></li>
                    </ul>
                    <ul><li>^ <a href="#" >Developing a module</a>
                        <ul><li><a href="#" >Creating a module</a></li>
                            <li><a href="#" >Installing a module</a></li>
                            <li class="actif"><a href="#" >Developing a controller</a></li>
                            <li><a href="#" >Retrieving HTTP parameters</a></li>
                            <li><a href="#" >Using the CRUD controller</a></li>
                            <li><a href="#" >Developing a REST controller</a></li>
                        </ul>
                        </li>
                    </ul>
                    </div>
                </div>
                
                <div class="book-edition">Jelix 1.3RC3</div>
                <h1 class="book-current">Section: Developing a controller</h1>

                <table class="book-nav">
                <tr>
                    <td class="book-nav-prev">&laquo; <a href=""   title="Previous section">Installing a module</a></td>
                    <td class="book-nav-up">^ <a href=""   title="Section">Developing a module</a></td>
                    <td class="book-nav-next"><a href=""   title="Next section">Retrieving HTTP parameters</a> &raquo;</td>
                </tr></table>
                <div class="lang">Switch to language:<a href="article_fr.html" >FR</a></div>
    
            </div>

                <!-- TOC START -->
               <div class="toc">
               <div class="tocheader toctoggle" id="toc__header">Table of Contents</div>
               <div id="toc__inside">
               
               <ul class="toc">
               <li class="clear">
               
               <ul class="toc">
               <li class="level2"><div class="li"><span class="li"><a href="#naming-conventions" class="toc">Naming conventions</a></span></div>
               <ul class="toc">
               <li class="level3"><div class="li"><span class="li"><a href="#file-system" class="toc">File-system</a></span></div></li>
               <li class="level3"><div class="li"><span class="li"><a href="#class-name" class="toc">Class name</a></span></div></li>
               
               </ul>
               </li>
               <li class="level2"><div class="li"><span class="li"><a href="#creating-a-controller" class="toc">Creating a controller</a></span></div></li>
               <li class="level2"><div class="li"><span class="li"><a href="#services-provided-by-jcontroller" class="toc">Services provided by jController</a></span></div>
               <ul class="toc">
               <li class="level3"><div class="li"><span class="li"><a href="#fetch-a-jresponse-object" class="toc">Fetch a jResponse object</a></span></div></li></ul>
               </li></ul>
               </li></ul>
               </div>
               </div>
               <!-- TOC END -->
               
               
               
               <p>
               Controller objects run actions corresponding to client-input. An action corresponds to a unique <acronym title="Uniform Resource Locator">URL</acronym> of your application.
               </p>
               
               <p>
               Actions are methods of the controller that prepare a response.
               </p>
               
               <p>
               Each controller is dedicated to one client-request type.
               </p>
               
               <h2 class="sectionedit1" id="naming-conventions">Naming conventions<a title="Link to this section" class="anchor" href="#naming-conventions"> ¶</a></h2>
               
               <div class="level2">
               
               </div>
               <div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit" method="post" action=""><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1303547648" /><input type="hidden" name="summary" value="[Naming conventions] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="284-315" /><input type="submit" value="Edit" class="button" title="Naming conventions" /></div></form></div>
               <h3 class="sectionedit2" id="file-system">File-system<a title="Link to this section" class="anchor" href="#file-system"> ¶</a></h3>
               <div class="level3">
               
               <p>
               Controllers are sorted per-module on the file-system, in the <code class="filename">controllers</code> directory. Each should have a unique prefix and suffix :
               </p>
               <pre class="code">controllerName.clientRequestType.php</pre>
               
               <p>
               For example, the <em>foo</em> controller usable on classic client-requests :
               </p>
               <pre class="code">foo.classic.php</pre>
               
               </div>
               <div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit" method="post" action=""><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1303547648" /><input type="hidden" name="summary" value="[File-system] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="316-628" /><input type="submit" value="Edit" class="button" title="File-system" /></div></form></div>
               <h3 class="sectionedit3" id="class-name">Class name<a title="Link to this section" class="anchor" href="#class-name"> ¶</a></h3>
               <div class="level3">
               
               <p>
               All controller class name should use suffix <em>Ctrl</em>.
               </p>
               
               <p>
               For example, the <em>foo</em> controller class name should be :
               </p>
               <pre class="code">fooCtrl</pre>
               
               </div>
               
               <div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit" method="post" action=""><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1303547648" /><input type="hidden" name="summary" value="[Class name] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="629-787" /><input type="submit" value="Edit" class="button" title="Class name" /></div></form></div>
               <h2 class="sectionedit4" id="creating-a-controller">Creating a controller<a title="Link to this section" class="anchor" href="#creating-a-controller"> ¶</a></h2>
               <div class="level2">
               
               <p>
               Each module could define a default controller, which then should be named “default”.
               </p>
               
               <p>
               For example, the first controller that you might want to create, named “default”: <code class="filename">exampleModule/controllers/default.classic.php</code>. The name of the class is then <code class="classname">defaultCtrl</code>. Here is the class:
               
               </p>
               <pre class="code php"><span class="kw2">class</span> defaultCtrl <span class="kw2">extends</span> jController <span class="br0">&#123;</span>
               &nbsp;
               <span class="br0">&#125;</span></pre>
               
               <p>
               Each controller class should inherit from <code class="classname">jController</code>. Then you add a method for each action you want to implement. Methods for actions should be public, without arguments, and should return an object which inherits from  <code class="classname">jResponse</code>, so a “response” in Jelix. Example:
               
               </p>
               <pre class="code php"><span class="kw2">class</span> defaultCtrl <span class="kw2">extends</span> jController <span class="br0">&#123;</span>
               &nbsp;
                   <span class="kw2">public</span> <span class="kw2">function</span> index<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
                       <span class="re0">$resp</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">getResponse</span><span class="br0">&#40;</span><span class="st_h">'html'</span><span class="br0">&#41;</span><span class="sy0">;</span>
               
                       <span class="re0">$resp</span><span class="sy0">-&gt;</span><span class="me1">addContent</span><span class="br0">&#40;</span><span class="st_h">'&lt;p&gt;Hello world&lt;/p&gt;'</span><span class="br0">&#41;</span><span class="sy0">;</span>
                       <span class="kw1">return</span> <span class="re0">$resp</span><span class="sy0">;</span>
               
                   <span class="br0">&#125;</span>
               <span class="br0">&#125;</span></pre>
               
               <p>
               The method named “index” in a controller is always considered as the default action of the controller.
               </p>
               
               <p>
               When Jelix cannot determine the action and/or the controller from the <acronym title="Uniform Resource Locator">URL</acronym>, it tries to execute the method <code class="methodname">index()</code> of the “default” controller. So it is recommended to have a “default” controller in a module, and an <code class="methodname">index()</code> method in each controller.
               
               </p>
               
               </div>
               
               <h4 id="redefining-the-class-constructor">Redefining the class constructor<a title="Link to this section" class="anchor" href="#redefining-the-class-constructor"> ¶</a></h4>
               <div class="level4">
               
               <p>
               To redefine the class constructor, you should call the parent constructor (so the constructor of <code class="classname">jController</code>), by giving the received argument, which is a <code class="classname">jRequest</code> object. Example: 
               
               </p>
               <pre class="code php"><span class="kw2">class</span> defaultCtrl <span class="kw2">extends</span> jController <span class="br0">&#123;</span>
                   <span class="kw2">function</span> __construct<span class="br0">&#40;</span><span class="re0">$request</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                       <span class="co1">//...</span>
               
                       parent<span class="sy0">::</span>__construct<span class="br0">&#40;</span><span class="re0">$request</span><span class="br0">&#41;</span><span class="sy0">;</span>
                       <span class="co1">//...</span>
                   <span class="br0">&#125;</span>
               <span class="br0">&#125;</span></pre>
               
               </div>
               <div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit" method="post" action=""><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1303547648" /><input type="hidden" name="summary" value="[Creating a controller] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="788-2446" /><input type="submit" value="Edit" class="button" title="Creating a controller" /></div></form></div>
               <h2 class="sectionedit5" id="services-provided-by-jcontroller">Services provided by jController<a title="Link to this section" class="anchor" href="#services-provided-by-jcontroller"> ¶</a></h2>
               
               <div class="level2">
               
               <p>
               <code class="classname">jController</code> provides methods for your actions.
               </p>
               
               </div>
               <div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit" method="post" action=""><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1303547648" /><input type="hidden" name="summary" value="[Services provided by jController] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="2447-2547" /><input type="submit" value="Edit" class="button" title="Services provided by jController" /></div></form></div>
               <h3 class="sectionedit6" id="fetch-a-jresponse-object">Fetch a jResponse object<a title="Link to this section" class="anchor" href="#fetch-a-jresponse-object"> ¶</a></h3>
               <div class="level3">
               
               <p>
               
               Actions should always return <code class="classname">jResponse</code> objects which implements the “View” of the MVC pattern. Jelix supplies several response objects, which allow to generate easily some <acronym title="HyperText Markup Language">HTML</acronym> pages, <acronym title="XML User Interface Language">XUL</acronym> pages, JSON, text, <acronym title="Extensible Markup Language">XML</acronym>, Zip, redirections etc, and you can make your own inheriting from <code class="classname">jResponse</code>.
               </p>
               
               <p>
               
               Each response type is declared with a keyword. So, to retrieve a specific response object, you call the method <code class="methodname">getResponse()</code> by indicating the keyword corresponding to the response type:
               </p>
               <pre class="code php">   <span class="re0">$resp</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">getResponse</span><span class="br0">&#40;</span><span class="st_h">'html'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
               
               <p>
               <var>$resp</var> is now an instance of <code class="classname">jResponseHtml</code> capable of generating <acronym title="HyperText Markup Language">HTML</acronym>.
               </p>
               
               <p>
               Notice that you can create your own response object. You can then support a new output format, or you can overload an existing response object to do some things shared between many actions. For example, you can create your own response <acronym title="HyperText Markup Language">HTML</acronym> which generates dynamically a menu. Then, in all actions where you use this responses, you will have this menu. See <a href="#" class="wikilink1" title="en:manual-1.3:creating-response">the page which explains how to do this</a>.
               
               </p>
               
               </div>
            <div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit" method="post" action=""><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1303547698" /><input type="hidden" name="summary" value="[Récupérer un objet jResponse] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="3140-" /><input type="submit" value="Edit" class="button" title="Récupérer un objet jResponse" /></div></form></div>


            <div id="book-page-footer">
                <table class="book-nav">
                <tr>
                    <td class="book-nav-prev">&laquo; <a href=""   title="Previous section">Installing a module</a></td>
                    <td class="book-nav-up">^ <a href=""   title="Section">Developing a module</a></td>
                    <td class="book-nav-next"><a href=""   title="Next section">Retrieving HTTP parameters</a> &raquo;</td>
                </tr></table>
                <div class="lang">Switch to language:<a href="article_fr.html" >FR</a></div>
                
                <div class="book-legal-notice">
                This manual is distributed under the terms of <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en" class="urlextern" title="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en"  rel="nofollow">licence Creative Commons by-nc-sa 3.0</a>. Therefore you&#039;re allowed to copy, modify and distribute and transmit it publicly  under the following conditions: <strong>Attribution</strong>, <strong>Noncommercial</strong>, <strong>Share Alike</strong>.
                
                </div>

            </div>

            <div id="article-footer">

                <div id="info">
                    <div class="wfooterinfo"> fr/documentation.txt &middot; Last modification: 2011/09/29 12:29 by laurent </div>
        
                    <div class="wfooterbuttons"> <form class="button btn_edit" method="post" action=""><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="submit" value="Modify this page" class="button" accesskey="e" title="Modify this page [E]" /></div></form> <form class="button btn_revs" method="get" action=""><div class="no"><input type="hidden" name="do" value="revisions" /><input type="submit" value="Old revisions" class="button" accesskey="o" title="Old revisions [O]" /></div></form>            </div>
                </div>
        
                <div id="authinfo">
                    <div class="wfooterinfo"> Logged in as: Laurent (laurent) </div>
                    <div class="wfooterbuttons">
                        <form class="button btn_admin" method="get" action="">
                            <div class="no"><input type="hidden" name="do" value="admin" /><input type="submit" value="Admin" class="button" title="Admin" /></div></form>
                        <form class="button btn_profile" method="get" action=""><div class="no"><input type="hidden" name="do" value="profile" /><input type="submit" value="Update profil" class="button" title="Update profil" /></div></form>
                        <form class="button btn_logout" method="get" action=""><div class="no"><input type="hidden" name="do" value="logout" /><input type="hidden" name="sectok" value="" /><input type="submit" value="Logout" class="button" title="Logout" /></div></form>                            </div>
        
                </div>

            </div>
        </div>


        <div id="content-footer">
    
        </div>


<!-- ============================ </content> ===== -->




    </div>
</div>
<div id="footer">
    <div class="top-container">
        <div class="footer-box">
        <p><img src="logo_jelix_moyen5.png" alt="Jelix" /><br/>
            is supported by <a href="http://innophi.com">Innophi</a>.</p>
        <p>Jelix is released under <br/>the LGPL Licence</p>
        </div>
        
        <div class="footer-box">
            <ul>
                <li><a href="">faq</a></li>
                <li><a href="">hall of fame</a></li>
                <li><a href="">credits</a></li>
                <li><a href="">contact us</a></li>
                <li><a href="">Sitemap</a></li>
                <li><a href="">goodies</a></li>
            </ul>
        </div>


        <div class="footer-box">
            <ul>
                <li><a href="">download nightlies</a></li>
                <li><a href="">changelog</a></li>
                <li><a href="">issues tracker</a></li>
                <li><a href="">roadmap</a></li>
                <li><a href="">how to contribute</a></li>
                <li><a href="">Code source repository</a></li>
            </ul>
        </div>

        <div class="footer-box">
            <ul>
                <li><a href="">jtpl standalone</a></li>
                <li><a href="">jbuildtools</a></li>
                <li><a href="">wikirenderer</a></li>
            </ul>
        </div>

        <p id="footer-legend">
            Copyright 2006-2011 Jelix team. <br/>
            Icons used on this page come from <a href="http://schollidesign.deviantart.com/art/Human-O2-Iconset-105344123">Human-O2</a>
            and <a href="http://www.oxygen-icons.org/">Oxygen</a> icons sets.<br/>
            Design by Laurentj. <br/>
            <img src="btn_jelix_powered.png" alt="page generated by a Jelix application" />
        </p>
    </div>
</div>

</body>
</html>